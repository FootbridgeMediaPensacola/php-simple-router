var $jscomp={scope:{},findInternal:function(a,b,d){a instanceof String&&(a=String(a));for(var c=a.length,e=0;e<c;e++){var f=a[e];if(b.call(d,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,d,c){if(b){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var e=a[c];e in d||(d[e]={});d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");var resultsPage=1,imageColumns=[];function showLoader(){$("#photos-loader").removeClass("d-none")}function hideLoader(){$("#photos-loader").addClass("d-none")}
function renderImageItem(a){var b=a.location+"/"+a.fileName,d=a.location+"/thumbs/"+a.fileName,c=$("#photo-template").clone().removeAttr("id").removeClass("d-none");c.find(".photo").attr("src",d).attr("full-src",b);c.find(".tags").html(a.tags.join(", "));c.find(".dimensions").html(a.width+" x "+a.height);c.find(".view-button").attr("href",a.location+"/"+a.fileName);c.find(".download-button").attr("href",a.location+"/"+a.fileName);getNextAppendColumn().append(c)}
function getNextAppendColumn(){var a=1E4,b;$.each(imageColumns,function(d,c){$(c).children().length<a&&(a=$(c).children().length,b=$(c))});return b}function collectColumns(){imageColumns=[];console.log("Yes");$(".photo-column").each(function(a,b){console.log("Added");imageColumns.push(b)})}function clearColumnContents(){$.each(imageColumns,function(a,b){$(b).html("")})}
function fetchImages(a,b){showLoader();$("#photos-result-container").addClass("d-none").removeClass("d-flex");$("#no-photos-message").addClass("d-none");$.ajax({type:"get",url:"/Controllers/queryImages.php",data:{query:a,page:b},success:function(a){"object"==typeof a&&(1==a.status?(a=a.images,hideLoader(),$("#photos-result-container").removeClass("d-none").addClass("d-flex"),0<a.length?$.each(a,function(a,b){renderImageItem(b)}):$("#no-photos-message").removeClass("d-none")):alert(a.error))}})}collectColumns();
fetchImages("",resultsPage);$("#image-query-input").on("keydown",function(a){13==a.keyCode&&(a.preventDefault(),a.stopPropagation(),resultsPage=1,clearColumnContents(),fetchImages($(this).val(),resultsPage))});
