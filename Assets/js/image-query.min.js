var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");var resultsPage=1,imageColumns=[];function showLoader(){$("#photos-loader").removeClass("d-none")}function hideLoader(){$("#photos-loader").addClass("d-none")}
function renderImageItem(a){var b=a.location+"/"+a.fileName,c=a.location+"/thumbs/"+a.fileName,d=$("#photo-template").clone().removeAttr("id").removeClass("d-none");d.find(".photo").attr("src",c).attr("full-src",b);d.find(".tags").html(a.tags.join(", "));d.find(".dimensions").html(a.width+" x "+a.height);getNextAppendColumn().append(d)}function getNextAppendColumn(){var a=1E4,b;$.each(imageColumns,function(c,d){$(d).children().length<a&&(a=$(d).children().length,b=$(d))});return b}
function collectColumns(){imageColumns=[];console.log("Yes");$(".photo-column").each(function(a,b){console.log("Added");imageColumns.push(b)})}function clearColumnContents(){$.each(imageColumns,function(a,b){$(b).html("")})}
function fetchImages(a,b){showLoader();$("#photos-result-container").addClass("d-none").removeClass("d-flex");$("#no-photos-message").addClass("d-none");$.ajax({type:"get",url:"/Controllers/queryImages.php",data:{query:a,page:b},success:function(a){"object"==typeof a&&(1==a.status?(a=a.images,hideLoader(),$("#photos-result-container").removeClass("d-none").addClass("d-flex"),0<a.length?$.each(a,function(a,b){renderImageItem(b)}):$("#no-photos-message").removeClass("d-none")):alert(a.error))}})}collectColumns();
fetchImages("",resultsPage);$("#image-query-input").on("keydown",function(a){13==a.keyCode&&(a.preventDefault(),a.stopPropagation(),resultsPage=1,clearColumnContents(),fetchImages($(this).val(),resultsPage))});
